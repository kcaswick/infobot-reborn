{"id":"bd-18i","title":"LLM service abstraction","description":"Create LLM service using the openai Python SDK pointed at a configurable base URL. Support chat completions with system/user messages. Handle retries, timeouts, and errors gracefully. Works with vLLM (production), ollama (local dev), or any OpenAI-compatible endpoint.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T05:38:58.391690207Z","created_by":"ubuntu","updated_at":"2026-02-06T06:46:48.410391559Z","closed_at":"2026-02-06T06:46:48.410348354Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-18i","depends_on_id":"bd-25b","type":"blocks","created_at":"2026-02-06T05:39:39.717807783Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-18i","depends_on_id":"bd-28c","type":"blocks","created_at":"2026-02-06T05:39:39.691662249Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1cg","title":"Response formatter","description":"Phase 1 core: Format bot responses. Handle <reply> tag (respond with just the value), <action> tag (action formatting), pipe-separated random selection (A|B|C), variable substitution ($who → username, $date → current datetime).","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T05:39:13.581843347Z","created_by":"ubuntu","updated_at":"2026-02-06T06:44:47.451267718Z","closed_at":"2026-02-06T06:44:47.451241798Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1cg","depends_on_id":"bd-28c","type":"blocks","created_at":"2026-02-06T05:39:39.815484267Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1ih","title":"PR #1 Review Round 1","description":"Parent epic for all Phase 1 PR review feedback. Tracks fixes from Gemini Code Assist, Copilot, and owner (kcaswick) reviews.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-10T17:41:35.699524571Z","created_by":"ubuntu","updated_at":"2026-02-10T17:42:27.387415243Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1ih","depends_on_id":"bd-25y","type":"blocks","created_at":"2026-02-10T17:42:27.257497317Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-2ar","type":"blocks","created_at":"2026-02-10T17:42:27.387367540Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-33m","type":"blocks","created_at":"2026-02-10T17:42:27.231698124Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-3ee","type":"blocks","created_at":"2026-02-10T17:42:27.283260215Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-3lu","type":"blocks","created_at":"2026-02-10T17:42:27.360195717Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-faa","type":"blocks","created_at":"2026-02-10T17:42:27.308773870Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-ut0","type":"blocks","created_at":"2026-02-10T17:42:27.334452591Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1ih","depends_on_id":"bd-zlm","type":"blocks","created_at":"2026-02-10T17:42:27.206721830Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1o7","title":"Discord bot integration","description":"Create Discord bot using discord.py. Connect to Discord, listen for messages and slash commands, pass them to the message handler, send responses back. Handle bot mentions, DMs, and channel messages appropriately. Respect guild/channel context.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T05:39:17.603242598Z","created_by":"ubuntu","updated_at":"2026-02-07T00:10:36.219751947Z","closed_at":"2026-02-07T00:10:36.219722528Z","close_reason":"Completed: Discord bot implementation","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1o7","depends_on_id":"bd-gca","type":"blocks","created_at":"2026-02-06T05:39:39.972212775Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-25b","title":"Configuration system","description":"Create a config module that loads settings from environment variables with sensible defaults. Use a dataclass + python-dotenv (no pydantic). Settings: LLM base URL, model name, Discord bot token, database path, log level. Support .env files for local dev.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T05:38:53.432185658Z","created_by":"ubuntu","updated_at":"2026-02-06T06:16:48.436702128Z","closed_at":"2026-02-06T06:16:48.436657658Z","close_reason":"Config module implemented and tested","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-25b","depends_on_id":"bd-28c","type":"blocks","created_at":"2026-02-06T05:39:39.617276683Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-25y","title":"Fix question parser to handle are/was/were copulas","description":"The wh_is regex rule in src/infobot/nlu/question_parser.py only optionally strips 'is' after question words. 'What are dogs?' produces key='are dogs' instead of key='dogs'. Fix: extend the optional copula match to include are/was/were. Must also update tests. PR comment: Copilot line 25 of question_parser.py.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-10T17:41:56.318442546Z","created_by":"ubuntu","updated_at":"2026-02-10T18:25:52.876732843Z","closed_at":"2026-02-10T18:25:52.876702627Z","close_reason":"Extended copula match to include are/was/were; added tests for all copulas","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-28c","title":"Project structure and package layout","description":"Set up the Python package structure: src/infobot/ with subpackages for db, kb, nlu, formatter, services. Create __init__.py files, update pyproject.toml with runtime dependencies (openai, discord.py, aiosqlite). Establish the skeleton that all other work builds on.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T05:38:48.461185518Z","created_by":"ubuntu","updated_at":"2026-02-06T06:12:07.544374270Z","closed_at":"2026-02-06T06:12:07.544345817Z","close_reason":"Package structure created, deps installed, imports verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ar","title":"Change API key fallback from 'ollama' to 'not-needed'","description":"In src/infobot/services/llm_service.py line 66, the default API key is 'ollama' which is unconventional and confusing. Change to 'not-needed' for clarity. PR comment: Gemini line 66 of llm_service.py.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T17:42:22.916037349Z","created_by":"ubuntu","updated_at":"2026-02-10T18:26:13.153242765Z","closed_at":"2026-02-10T18:26:13.153216190Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2bt","title":"Legacy factoid import tool","description":"Phase 1: CLI tool to import legacy Infobot factoid files (botname-is.txt, botname-are.txt). Parse 'topic => information' format, clean IRC formatting, apply quality heuristics, import to SQLite knowledge base. Per docs/legacy_import.md spec.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-06T05:39:25.806474139Z","created_by":"ubuntu","updated_at":"2026-02-10T17:50:38.509951444Z","closed_at":"2026-02-10T17:50:38.509899321Z","close_reason":"Already completed in Phase 1 (commit c542832). Incorrectly reopened by background session.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2bt","depends_on_id":"bd-6lc","type":"blocks","created_at":"2026-02-06T05:39:40.048066651Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2us","title":"Modal deployment skeleton","description":"Create modal.py with: Modal app definition, vLLM model serving on T4 GPU, Volume for SQLite persistence, Discord bot as a long-running Modal function. Support modal serve for dev and modal deploy for production. Keep warm configuration.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T05:39:22.969780997Z","created_by":"ubuntu","updated_at":"2026-02-07T00:10:36.245067391Z","closed_at":"2026-02-07T00:10:36.245043375Z","close_reason":"Completed: Modal deployment skeleton","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2us","depends_on_id":"bd-18i","type":"blocks","created_at":"2026-02-06T05:39:39.997558683Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-2us","depends_on_id":"bd-1o7","type":"blocks","created_at":"2026-02-06T05:39:40.023184076Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-33m","title":"Remove unused src/infobot/llm.py (duplicate of services/llm_service.py)","description":"Both Gemini and Copilot flagged src/infobot/llm.py as unused. Verified: nothing in the codebase imports from infobot.llm. The canonical implementation is src/infobot/services/llm_service.py which has retry logic and typed data structures. Remove the dead file. PR comments: Gemini line 101 of llm.py; Copilot line 33 of llm.py.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T17:41:51.113754758Z","created_by":"ubuntu","updated_at":"2026-02-10T18:25:30.221169499Z","closed_at":"2026-02-10T18:25:30.221141430Z","close_reason":"Deleted unused src/infobot/llm.py - no imports found in codebase","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ee","title":"Use config.log_level instead of hard-coded INFO in main.py","description":"src/main.py hard-codes logging.INFO at line 11, ignoring Config.log_level. Fix: load Config first, then configure logging with config.log_level. PR comment: Copilot line 13 of main.py.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-10T17:42:01.134274109Z","created_by":"ubuntu","updated_at":"2026-02-10T18:26:09.819853112Z","closed_at":"2026-02-10T18:26:09.819828554Z","close_reason":"Moved logging.basicConfig into main() to use config.log_level instead of hard-coded INFO","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3lu","title":"Fix __main__.py Usage docstring (wrong entrypoint)","description":"src/infobot/tools/__main__.py Usage says 'python -m infobot.tools.legacy_import' but since this IS __main__.py, the correct invocation is 'python -m infobot.tools'. Fix the docstring. PR comment: Copilot line 6 of __main__.py.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T17:42:18.353954288Z","created_by":"ubuntu","updated_at":"2026-02-10T18:25:54.278585546Z","closed_at":"2026-02-10T18:25:54.278557487Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-6lc","title":"Factoid data model and storage","description":"Phase 1 core: Implement factoid CRUD operations. Factoids have a key, value, type (is/are), support for special tags (<reply>, <action>), pipe-separated random responses, and variable substitution ($who, $date). Store and retrieve from SQLite.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T05:39:04.091764143Z","created_by":"ubuntu","updated_at":"2026-02-06T20:52:05.717007489Z","closed_at":"2026-02-06T20:52:05.716969088Z","close_reason":"Verified complete: data model, CRUD store, SQLite schema, 34 tests passing","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-6lc","depends_on_id":"bd-vfs","type":"blocks","created_at":"2026-02-06T05:39:39.742277136Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-faa","title":"Add FactoidExistsError custom exception for duplicate detection","description":"In src/infobot/tools/legacy_import.py line 225, duplicate factoid detection uses fragile string matching: 'if \"already exists\" in str(e)'. Fix: (1) define FactoidExistsError(ValueError) in infobot.kb.store, (2) raise it from FactoidStore.create, (3) catch it specifically in legacy_import.py. PR comment: Gemini line 225 of legacy_import.py.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T17:42:07.612026057Z","created_by":"ubuntu","updated_at":"2026-02-10T18:26:43.443259435Z","closed_at":"2026-02-10T18:26:43.443233354Z","close_reason":"Added FactoidExistsError custom exception; updated store.create to raise it; updated legacy_import.py to catch it specifically","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-gca","title":"Message handler (orchestrator)","description":"Phase 1 core: The main message processing pipeline. Receives a message, runs it through NLU (question parser + intent detector), queries/updates knowledge base, formats response, optionally enhances via LLM. Returns the response to send back to the chat platform.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T05:39:16.162027179Z","created_by":"ubuntu","updated_at":"2026-02-07T00:08:36.676486377Z","closed_at":"2026-02-07T00:08:36.676456393Z","close_reason":"Completed: message handler orchestrator implemented","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-gca","depends_on_id":"bd-18i","type":"blocks","created_at":"2026-02-06T05:39:39.944700262Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-gca","depends_on_id":"bd-1cg","type":"blocks","created_at":"2026-02-06T05:39:39.919231866Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-gca","depends_on_id":"bd-6lc","type":"blocks","created_at":"2026-02-06T05:39:39.841750291Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-gca","depends_on_id":"bd-qrv","type":"blocks","created_at":"2026-02-06T05:39:39.869311086Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-gca","depends_on_id":"bd-u88","type":"blocks","created_at":"2026-02-06T05:39:39.894655776Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-qrv","title":"Question parser (NLU)","description":"Phase 1 core: Parse incoming messages to detect question intent. Handle formats: 'What is X?', 'Where is X?', 'Who is X?', 'X?', 'tell me about X'. Extract the factoid key being queried. Return structured intent objects.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T05:39:06.445401181Z","created_by":"ubuntu","updated_at":"2026-02-06T06:31:24.787214764Z","closed_at":"2026-02-06T06:31:24.787183573Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-qrv","depends_on_id":"bd-28c","type":"blocks","created_at":"2026-02-06T05:39:39.766342015Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-u88","title":"Factoid creation intent detector","description":"Phase 1 core: Detect when a user is stating a fact ('X is Y', 'X are Y'). Distinguish from questions and commands. Handle edge cases like 'no, X is Y' (replace) and 'X is also Y' (append). Return structured intent with key, value, and modification type.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T05:39:09.163270240Z","created_by":"ubuntu","updated_at":"2026-02-06T06:49:31.816140986Z","closed_at":"2026-02-06T06:49:31.816115672Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-u88","depends_on_id":"bd-28c","type":"blocks","created_at":"2026-02-06T05:39:39.790453450Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-ut0","title":"Use specific IntegrityError in test_db_schema.py pytest.raises","description":"Two pytest.raises(Exception) calls in tests/test_db_schema.py (lines 103 and 123) should use aiosqlite.IntegrityError instead of generic Exception. The comments already note this. Add 'import aiosqlite' and fix both calls. PR comment: Gemini lines 103 and 123 of test_db_schema.py.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T17:42:13.362804490Z","created_by":"ubuntu","updated_at":"2026-02-10T18:25:33.687618737Z","closed_at":"2026-02-10T18:25:33.687596109Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-vfs","title":"Database layer with SQLite","description":"Create the database module: async SQLite access via aiosqlite, schema creation/migration for factoids table (key, value, type is/are, created_at, updated_at, source). WAL mode enabled. Connection management suitable for both local dev and Modal Volumes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T05:38:56.404005994Z","created_by":"ubuntu","updated_at":"2026-02-06T06:33:01.607379869Z","closed_at":"2026-02-06T06:33:01.607351303Z","close_reason":"Completed: database layer with SQLite, WAL mode, schema management, and full test coverage","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-vfs","depends_on_id":"bd-25b","type":"blocks","created_at":"2026-02-06T05:39:39.668063484Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-vfs","depends_on_id":"bd-28c","type":"blocks","created_at":"2026-02-06T05:39:39.642405420Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-zlm","title":"Rewrite Modal deployment to use Discord Interactions API","description":"Owner (kcaswick) says the current Modal deployment is fundamentally wrong. It runs a long-lived discord.py bot inside a Modal function, but Modal is serverless - the bot must use Discord's Interactions API (HTTP endpoint) instead of a persistent WebSocket connection. Also: (1) use pip_install_from_pyproject instead of repeating deps, (2) modal package is not in pyproject.toml, (3) copy_local_file is used on a directory (should be copy_local_dir or proper packaging), (4) LOG_LEVEL is hard-coded to INFO. This is a significant rewrite of src/modal.py. PR comments: kcaswick lines 31, 12, 43; Copilot lines 35, 69.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-02-10T17:41:45.291856228Z","created_by":"ubuntu","updated_at":"2026-02-10T18:24:29.021253386Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-zq2","title":"Test infrastructure and initial test suite","description":"Set up pytest fixtures, conftest.py with shared test database, LLM mock (returns canned responses). Write unit tests for factoid model, question parser, intent detector, response formatter. Aim for >80% coverage on Phase 1 modules.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T05:39:28.347310869Z","created_by":"ubuntu","updated_at":"2026-02-07T00:07:30.097298950Z","closed_at":"2026-02-07T00:07:30.097269052Z","close_reason":"Complete: 77 tests passing, 97% Phase 1 coverage, shared fixtures in conftest.py","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-zq2","depends_on_id":"bd-1cg","type":"blocks","created_at":"2026-02-06T05:39:40.151070530Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-zq2","depends_on_id":"bd-6lc","type":"blocks","created_at":"2026-02-06T05:39:40.073850036Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-zq2","depends_on_id":"bd-qrv","type":"blocks","created_at":"2026-02-06T05:39:40.100206325Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-zq2","depends_on_id":"bd-u88","type":"blocks","created_at":"2026-02-06T05:39:40.125344865Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
